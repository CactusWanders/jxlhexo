---
title: WebGlå…¥é—¨
tags:
---

æˆ‘è¦å­¦webGläº†ï¼Œä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºå¬ç€å¾ˆé…·ğŸ˜ã€‚è¿˜æœ‰å°±æ˜¯ç°åœ¨åœ¨æ¸©æ•…jsåŸºç¡€ï¼Œé•¿æ—¶é—´æµ¸åœ¨ä¸€ä¸ªçŸ¥è¯†ç‚¹é‡Œï¼Œæœ‰ç‚¹ç–²åŠ³ï¼Œç»“åˆä¸‹ï¼Œæ”¾æ¾æ”¾æ¾ã€‚
æ‰¾äº†ä¸ª[WebGlä¸­æ–‡ç½‘](http://www.hewebgl.com/)ï¼Œç¬¬ä¸€æ­¥æ¥å­¦ä¹ ä¸‹three.jså§ã€‚
Threejsèƒ½åšåœ¨æµè§ˆå™¨ä¸Šå†™å‡ºå¯è¿è¡Œçš„3Dç¨‹åºã€‚è¿™æ˜¯githubä¸Šçš„å¼€æºé¡¹ç›®https://github.com/mrdoob/three.js

## ç¬¬ä¸€ä¸ªå®ä¾‹ï¼š å˜šç‘Ÿçš„å°æ–¹æ–¹
ç§ç§å°æ–¹æ–¹é‡Œéƒ½æœ‰å•¥ã€‚ä»£ç ä¸é•¿ï¼Œè´´å‡ºæ¥ç†è§£ä¸‹
```
    <script>
        // å¤§å¸ƒæ™¯ï¼Œå¤§æ¦‚å°±æ˜¯å°æ–¹æ–¹çš„ç”Ÿå­˜ç¯å¢ƒäº†
        var scene = new THREE.Scene();
        // é€è§†ç›¸æœºï¼Œè¿™ä¸ªæ˜¯è§‚å¯Ÿå°æ–¹æ–¹å˜šç‘Ÿçš„è§’åº¦
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        // æ¸²æŸ“å™¨ï¼Œè¿™ä¸ªæ˜¯ç”»å°æ–¹æ–¹çš„ç”»ç¬”äº†å§
        var renderer = new THREE.WebGLRenderer();
        // ç¡®è®¤ä¸‹å¯æ¸²æŸ“çš„èŒƒå›´ï¼Œä¸çŸ¥é“è¿™ä¸ªé‡å èµ·æ¥ä¼šæ€ä¹ˆæ ·
        renderer.setSize(window.innerWidth, window.innerHeight);
        // åˆ°åº•æ˜¯åœ¨æµè§ˆå™¨é‡Œï¼Œè¿˜æ˜¯è¦åœ¨å¤§bodyé‡Œçš„
        document.body.appendChild(renderer.domElement);

        // å°æ–¹æ–¹çš„éª¨æ¶
        var geometry = new THREE.CubeGeometry(1,1,1);
        // å°æ–¹æ–¹çš„çš®ç›¸
        var material = new THREE.MeshBasicMaterial({color: 0x00ff00});
        // å°æ–¹æ–¹çš„è¯ç”Ÿå•¦
        var cube = new THREE.Mesh(geometry, material);
        // å°æ–¹æ–¹çš„å‡ºç°åœ¨å¤§å¸ƒæ™¯é‡Œäº†
        scene.add(cube);
        // æ”¾å¥½ç›¸æœºï¼Œæ€ä¹ˆæ”¾å¾—å‘€ï¼Œæ²¡çœ‹æ˜ç™½ï¼Œåæ­£è¯´è¿™ä¹ˆæ”¾èƒ½çœ‹ç€ï¼Œæˆ‘å°±è¿™ä¹ˆæ”¾å§
        camera.position.z = 5;
        // å°æ–¹æ–¹å˜šç‘Ÿçš„å§¿æ€
        function render() {
            requestAnimationFrame(render);
            cube.rotation.x += 0.1;
            cube.rotation.y += 0.1;
            cube.rotation.z += 0.1;
            renderer.render(scene, camera);
        }
        // èµ·æ¥å˜šç‘Ÿå§
        render();
    </script>
```
ç„¶åï¼Œç„¶åï¼Œä½œè€…è´´äº†ä¸ªæ¨¡æ¿ï¼Œç”»äº†æ¡çº¿ã€‚ã€‚ã€‚
by the way ç”±äºç‰ˆæœ¬é—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹
var line = new THREE.Line( geometry, material, THREE.LineSegments );
camera.lookAt(0, 0, 0);
æ‰èƒ½æ­£å¸¸æ˜¾ç¤º

ç„¶åæˆ‘å°±å¼€å°å·®å»äº†ï¼Œå»çœ‹äº†ä¸€ä¸ª[ç‚¹çº¿é¢çš„ä¾‹å­](https://codepen.io/luigimannoni/pen/NPgGpX)ã€‚æƒŠè‰³æœ‰æ²¡æœ‰ï¼Œè¡¨é¢é‚£äº®æ™¶æ™¶çš„ï¼Œæˆ‘ä¹Ÿè¦ç”»é‚£ä¸ªã€‚æˆ‘å°±æ˜¯è¿™ä¹ˆä¿—ã€‚çœ‹ä»£ç ï¼Ÿæ²¡æœ‰çš„äº‹ï¼Œæˆ‘è¿˜æ˜¯ä¹–ä¹–å­¦åŸºç¡€å»ã€‚ã€‚ã€‚

## ç”»ä¸ªç‚¹çº¿é¢å¥½ä¸å¥½
é‚£ä¸ªæ¨¡æ¿ï¼Œå¯¹ç”»çº¿çš„é‚£ä¸ªæ¨¡æ¿ï¼Œæ‹¿å‡ºæ¥ç§ç§å§ï¼Œåº”è¯¥æœ‰ç”»ç‚¹å’Œçº¿çš„æ“ä½œã€‚
å°†æ¨¡æ¿çš„æ–¹æ³•ä¿®æ”¹ï¼Œç”»å‡ºä¸€æ ¹è¢…è¢…çš„çº¿ï¼Œè¿˜å¥½ï¼Œä¿®æ”¹æ¨¡æ¿çš„åŸºç¡€ä¸Šï¼Œæˆ‘å¤§æ¦‚çŸ¥é“æ€ä¹ˆåˆ’çº¿äº†ã€‚
function initObject() {
    // å®šä¹‰ä¸€ä¸ªå‡ ä½•ä½“
    var geometry = new THREE.Geometry();
    // å‡ ä½•ä½“æè´¨å±æ€§
    var material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors} );
    for (let index = 0; index < 10; index++) {
        // åˆå§‹åŒ–é¢œè‰²å’Œä½ç½®ï¼Œå¹¶æ”¾å…¥å‡ ä½•ä½“ä¸­
        geometry.colors.push(new THREE.Color( 0xFF0000 + Math.pow(100,index) ));
        geometry.vertices.push(new THREE.Vector3( Math.pow(2,index)*Math.pow(-1,index), 100 * index, 10*index));
    }
    //  ç¡®å®šæ˜¯çº¿æ¡å•¦
    var line = new THREE.Line( geometry, material, THREE.LineSegments );
    // å¥½äº†ï¼Œæ”¾è¿›å»å§
    scene.add(line);
}
åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿˜æ˜¯æ»¡æ»¡çš„èˆ’æœçš„ã€‚æ¥ä¸‹æ¥æ–‡æ¡£å‘Šè¯‰æˆ‘ç”»ä¸ªç½‘æ ¼ï¼Œç½‘æ ¼ã€‚ã€‚ã€‚æˆ‘è¿˜æ˜¯å…ˆè‡ªå·±è¯•è¯•å§ã€‚
å¥½å§ï¼Œæˆ‘å¤±è´¥äº†ï¼Œæˆ‘ä¸ä¹ æƒ¯è§†è§’åœ¨yè½´ï¼Œä¹Ÿä¸çŸ¥é“è°ƒæ•´åˆ°zè½´cameraè¯¥æ€ä¹ˆæ”¾ã€‚ä¸ºå•¥æˆ‘æ— è®ºå“ªä¸ªè½´æ—‹è½¬90åº¦éƒ½ç«–ä¸èµ·æ¥ã€‚
ã€‚ã€‚ã€‚å…ˆå­˜ç–‘å§ã€‚ã€‚ã€‚ä½†æ„¿å½±å“ä¸å¤§

## è®©åœºæ™¯åŠ¨èµ·æ¥
ç”±äºä¸ŠèŠ‚è¯¾æ²¡çœ‹æ˜ç™½ï¼Œæ‰€ä»¥è¿™èŠ‚è¯¾æœ‰æƒ…ç»ªã€‚ç®€å•è¯´ä¸‹
render()æ–¹æ³•é‡Œæœ‰requestAnimationFrameè¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯é‡å¤è°ƒç”¨renderæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨renderæ–¹æ³•å¯¹å°æ–¹æ–¹åæ ‡è½´è¿åŠ¨æ–¹å‘ï¼Œå®ƒå°±åŠ¨äº†ï¼Œæ˜¯çš„ï¼Œä»–ä¼šåŠ¨çš„ã€‚ç›¸å¯¹è®ºçš„å‚ç…§ç‰©è¯´ï¼ŒåŠ¨cameraæˆ–è€…å‡ ä½•ä½“éƒ½ä¼šåŠ¨ã€‚
ç„¶åç”¨äº†[Stats.js](https://github.com/mrdoob/stats.js/blob/master/build/stats.js)æˆ‘æ²¡ç»†çœ‹ï¼Œä¸æ˜ç™½è¿™ä¸ªç›‘æ§äº†ä¸ªå•¥ï¼Œå…ˆè´´ä¸Šæ¥å§ã€‚
ç„¶ååˆè®²äº†åŠ¨ç”»æ’ä»¶[tween.js](https://github.com/tweenjs/tween.js),ä¸çœ‹ä¸çœ‹ï¼Œæˆ‘åˆä¸æ˜¯ç”µè„‘ï¼Œå½•å…¥äº†å°±ä¼šäº†çš„ã€‚ä¸çœ‹ä¸çœ‹ï¼Œè„‘è¢‹ä¼šç‚¸ã€‚

## ä¸‰ç»´ç©ºé—´çš„è§‚å¯Ÿ
è¿™æ˜¯èŠ‚ç†è®ºè¯¾ã€‚

æ­£æŠ•å½±å’Œé€è§†æŠ•å½±çš„åŒºåˆ«æ˜¯ï¼šé€è§†æŠ•å½±æœ‰ä¸€ä¸ªåŸºæœ¬ç‚¹ï¼Œå°±æ˜¯è¿œå¤„çš„ç‰©ä½“æ¯”è¿‘å¤„çš„ç‰©ä½“å°ã€‚

æ­£æŠ•å½±ç›¸æœºï¼šæ„é€ å‡½æ•°å¦‚ä¸‹
THREE.OrthographicCamera( left, right, top, bottom, near, far )

é€è§†æŠ•å½±ç›¸æœºçš„æ„é€ å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š
PerspectiveCamera( fov, aspect, near, far )
è§†è§’fovï¼š è§†è§’çš„å¤§å°ã€‚æ•°å­—è¶Šå°è¶Šè¿‘ï¼Œä¹Ÿè¶Šå¤§
çºµæ¨ªæ¯”aspectï¼š å®é™…çª—å£çš„çºµæ¨ªæ¯”ï¼Œå³å®½åº¦é™¤ä»¥é«˜åº¦ã€‚è¿™ä¸ªå€¼è¶Šå¤§ï¼Œè¯´æ˜ä½ å®½åº¦è¶Šå¤§
è¿‘å¹³é¢nearï¼š è¡¨ç¤ºä½ è¿‘å¤„çš„è£é¢çš„è·ç¦»ã€‚è¡¥å……ä¸€ä¸‹ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯çœ¼ç›è·ç¦»è¿‘å¤„çš„è·ç¦»ï¼Œå‡è®¾ä¸º10ç±³è¿œï¼Œè¯·ä¸è¦è®¾ç½®ä¸ºè´Ÿå€¼ï¼ŒThree.jså°±å‚»äº†,ä¸çŸ¥é“æ€ä¹ˆç®—äº†,
è¿œå¹³é¢farï¼šè¡¨ç¤ºä½ è¿œå¤„çš„è£é¢,

## äº”å½©çš„å…‰æº

